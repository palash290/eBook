<section class="ct_inner_bg">
      <div class="container">
            <div class="row">
                  <div class="col-md-12">
                        <h2 class="text-center text-white ct_fs_28">Where Stories Meet Readers & Authors Thrive.</h2>
                        <p class="ct_text_636363">E Book Ink is your gateway to a world of books, where readers can
                              discover, connect, and enjoy
                              immersive reading experiences. Authors and publishers can showcase their work, engage with
                              their
                              audience, and build their literary brandâ€”all in one place.</p>
                  </div>

            </div>

      </div>
</section>

<section class="ct_px_40 ct_mt_40 ct_py_100 pt-0">
      <div class="container-fluid">
            <div class="row">
                  <div class="col-md-12">
                        <h2 class="ct_fw_400 ct_fs_24 mb-4"><span class="ct_fw_600">Authors</span> ({{authors.length}})
                        </h2>
                        <div class="row">
                              <div class="col-lg-7 col-md-6 mb-3 mb-md-0">
                                    <div class="form-group">
                                          <label for="" class="ct_fs_14 mb-2 ct_fw_500">Search:</label>
                                          <div class="position-relative">
                                                <input type="text" name="" id="" placeholder="Search by author name"
                                                      class="form-control ct_input_text ct_text_indent_30"
                                                      [(ngModel)]="searchQuery" (ngModelChange)="getAuthors()">
                                                <i class="fa-solid fa-magnifying-glass ct_search_icon_left"></i>
                                          </div>
                                    </div>
                              </div>
                              <div class="col-lg-5 col-md-6 mb-3 mb-md-0">
                                    <div class="form-group">
                                          <label for="" class="ct_fs_14 mb-2 ct_fw_500">Genre:</label>
                                          <!-- <select class="form-control ct_input_text">
                                                <option value="">All Genre</option>
                                                <option value="">Genre</option>
                                                <option value="">Genre</option>
                                          </select> -->
                                          <nz-select class="form-control et_genre_multiselect_1" nzMode="tags"
                                                nzPlaceHolder="Select" [(ngModel)]="selectedCategories"
                                                (ngModelChange)="getAuthors()" [nzNotFoundContent]="'No Data Found'">
                                                @for (option of categories; track option) {
                                                <nz-option [nzLabel]="option.name" [nzValue]="option.id"></nz-option>
                                                }
                                          </nz-select>
                                    </div>
                              </div>
                              <!-- <div class="col-lg-2 col-md-3 mb-3 mb-md-0">
                                    <div class="form-group">
                                          <label for="" class="ct_fs_14 mb-2 ct_fw_500">Author:</label>
                                          <nz-select class="form-control ct_input_text" nzMode="tags"
                                                nzPlaceHolder="Select" [(ngModel)]="selectedAuthors"
                                                [nzNotFoundContent]="'No Data Found'">
                                                @for (option of authors; track option) {
                                                <nz-option [nzLabel]="option.fullName" [nzValue]="option"></nz-option>
                                                }
                                          </nz-select>
                                    </div>
                              </div> -->
                        </div>
                  </div>
            </div>

            <div class="row ct_pt_80">
                  @if(authors.length > 0){
                  @for(item of authors; track $index) {
                  <div class="col-xl-4 col-lg-6 mb-4">
                        <div class="ct_author_white_card d-grid">
                              <div>
                                    <div
                                          class="d-flex align-items-center justify-content-between ct_flex_direction_column_575 gap-3">
                                          <div class="ct_author_name_main">
                                                <img [src]="item.avatar_url ? item.avatar_url : 'assets/img/profile_logo.jpg'"
                                                      alt="" class="ct_img_w_48">
                                                <div>
                                                      <h4 routerLink="/author-detail" [queryParams]="{author: item.id}"
                                                            class="ct_fs_16 ct_fw_600 mb-0 text-capitalize ct_cursor_pointer">
                                                            {{item.fullName}}
                                                      </h4>
                                                      @if(item.tagline != 'null' && item.tagline != null){
                                                      <p class="ct_text_636363 mb-0">
                                                            {{(item.tagline | slice:0:40) + (item.tagline.length > 40 ?
                                                            '...' : '')}}
                                                      </p>
                                                      }
                                                </div>
                                          </div>
                                          <button class="ct_purple_outline_btn  ct_grey_outline_btn"
                                                (click)="item.isFollowed ? unfollowAuthor(item.id) : followAuthor(item.id)">{{item.isFollowed
                                                ? 'Following' : 'Follow'}}</button>
                                    </div>

                                    <div class="ct_mt_32 pb-5">
                                          @if(item.books.length > 0){
                                          <div class="ct_autohre_book_grid_2">
                                                <img [src]="item.books[0].coverImage" alt="">
                                                <div>
                                                      <h4 routerLink="/book-overview"
                                                            [queryParams]="{id:item.books[0].id}"
                                                            class="ct_fs_16 ct_fw_500 mb-2 text-capitalize ct_cursor_pointer">
                                                            {{item.books[0].title}}
                                                      </h4>
                                                      <p class="ct_fs_14 ct_text_636363 mb-1">
                                                            {{(item.books[0].description | slice:0:100) +
                                                            (item.books[0].description.length > 100 ? '...' : '')}}.
                                                      </p>
                                                      <h5 class="ct_fs_18 ct_fw_600 mt-2 mb-0">
                                                            {{item.books[0].price | currency:'USD'}}
                                                      </h5>
                                                </div>
                                          </div>
                                          }@else {
                                          <p class="text-center ct_fw_600 mt-4"> No book Published</p>
                                          }

                                    </div>
                              </div>

                              <!-- <div class="text-end">
                                    <a href="#" class="ct_read_online_link">
                                          <svg width="20" height="16" viewBox="0 0 20 16" fill="none"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <g clip-path="url(#clip0_806_7570)">
                                                      <path d="M8.68056 15.8386C8.86574 15.8849 9.03935 15.8501 9.20138 15.7344C9.36342 15.6418 9.44444 15.4913 9.44444 15.283V2.19275C9.44444 2.03072 9.38657 1.90339 9.27083 1.81078C8.92361 1.50983 8.37962 1.23203 7.63888 0.977384C6.89814 0.722823 6.01851 0.583944 5 0.560749C4.12037 0.560749 3.29861 0.653362 2.53472 0.83859C1.77083 1.02373 1.13426 1.20892 0.625001 1.39415C0.231482 1.57929 0.0231482 1.90335 0 2.36634V15.2136C0 15.4219 0.0925926 15.5839 0.277778 15.6997C0.439815 15.8154 0.625 15.8501 0.833333 15.8038C1.41203 15.5955 2.07175 15.4103 2.8125 15.2483C3.57639 15.0862 4.30556 15.0052 5 15.0052C5.60185 15.0284 6.25 15.121 6.94444 15.283C7.61574 15.4682 8.19445 15.6534 8.68056 15.8386ZM11.3194 15.8386C11.8056 15.6534 12.3842 15.4682 13.0555 15.283C13.75 15.121 14.3982 15.0284 15 15.0052C15.6944 15.0052 16.4236 15.0862 17.1876 15.2483C17.9283 15.4103 18.588 15.5955 19.1667 15.8038C19.375 15.8501 19.5601 15.8154 19.7222 15.6997C19.9074 15.5839 20 15.4219 20 15.2136V2.36634C19.9769 1.90335 19.7686 1.57929 19.375 1.39415C18.8657 1.20892 18.2291 1.02373 17.4653 0.83859C16.7014 0.653362 15.8797 0.560749 15 0.560749C13.9815 0.583944 13.1019 0.722823 12.3611 0.977384C11.6204 1.23203 11.0764 1.50983 10.7292 1.81078C10.6134 1.90339 10.5556 2.03072 10.5556 2.19275V15.283C10.5556 15.4913 10.6366 15.6418 10.7986 15.7344C10.9606 15.8501 11.1343 15.8849 11.3194 15.8386Z"
                                                            fill="#0A142F" />
                                                </g>
                                                <defs>
                                                      <clipPath id="clip0_806_7570">
                                                            <rect width="20" height="15.2976" fill="white"
                                                                  transform="translate(0 0.560547)" />
                                                      </clipPath>
                                                </defs>
                                          </svg>
                                          <p class="mb-0 ct_fw_500">Read Online</p>

                                    </a>
                              </div> -->
                              <div
                                    class="d-flex align-items-center justify-content-between gap-2 mt-2 ct_flex_column_1199 align-self-end ">
                                    <a routerLink="/author-detail" [queryParams]="{author: item.id}"
                                          class="ct_purple_outline_btn w-100 ct_outline_btn_w_icon">
                                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                viewBox="0 0 24 24">
                                                <path fill="currentColor"
                                                      d="M15 11h7v2h-7zm1 4h6v2h-6zm-2-8h8v2h-8zM4 19h10v-1c0-2.757-2.243-5-5-5H7c-2.757 0-5 2.243-5 5v1zm4-7c1.995 0 3.5-1.505 3.5-3.5S9.995 5 8 5S4.5 6.505 4.5 8.5S6.005 12 8 12" />
                                          </svg>
                                          View Detail
                                    </a>
                                    <a (click)="sendMessage(item)"
                                          class="ct_purple_outline_btn ct_outline_btn_w_icon w-100">
                                          <svg width="19" height="15" viewBox="0 0 19 15" fill="none"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <path d="M1.11328 3.54199L7.91738 8.30486C8.46836 8.69054 8.74384 8.88339 9.0435 8.95808C9.30819 9.02406 9.58504 9.02406 9.84973 8.95808C10.1494 8.88339 10.4249 8.69055 10.9758 8.30486L17.7799 3.54199M5.11328 14.3753H13.7799C15.1801 14.3753 15.8801 14.3753 16.4149 14.1028C16.8853 13.8632 17.2678 13.4807 17.5075 13.0103C17.7799 12.4755 17.7799 11.7755 17.7799 10.3753V5.04199C17.7799 3.64186 17.7799 2.9418 17.5075 2.40702C17.2678 1.93661 16.8853 1.55416 16.4149 1.31448C15.8801 1.04199 15.1801 1.04199 13.7799 1.04199H5.11328C3.71315 1.04199 3.01308 1.04199 2.4783 1.31448C2.0079 1.55416 1.62545 1.93661 1.38576 2.40702C1.11328 2.9418 1.11328 3.64186 1.11328 5.04199V10.3753C1.11328 11.7755 1.11328 12.4755 1.38576 13.0103C1.62545 13.4807 2.0079 13.8632 2.4783 14.1028C3.01308 14.3753 3.71315 14.3753 5.11328 14.3753Z"
                                                      stroke="#6A36FF" stroke-linecap="round" stroke-linejoin="round" />
                                          </svg>
                                          Send Message
                                    </a>
                              </div>
                        </div>
                  </div>
                  }

                  }@else{
                  <section class="ct_py_100 bg-white">
                        <div class="container">
                              <div class="row">
                                    <div class="col-md-10 mx-auto">
                                          <div class="ct_payment_succesfull_main text-center">
                                                <div class="ct_check_icon_success">
                                                      <svg xmlns="http://www.w3.org/2000/svg" width="150" height="150"
                                                            viewBox="0 0 24 24">
                                                            <g fill="none" stroke="currentColor" stroke-width="1.5">
                                                                  <circle cx="12" cy="6" r="4" />
                                                                  <path
                                                                        d="M20 17.5c0 2.485 0 4.5-8 4.5s-8-2.015-8-4.5S7.582 13 12 13s8 2.015 8 4.5Z" />
                                                            </g>
                                                      </svg>
                                                </div>
                                                <div class="mt-3">
                                                      <h4 class="ct_fs_36 ct_fw_600 mb-4">Oops! No Authors Found</h4>
                                                </div>
                                          </div>
                                    </div>
                              </div>
                        </div>
                  </section>
                  }
            </div>

      </div>

</section>

<app-loader *ngIf="loading"></app-loader>